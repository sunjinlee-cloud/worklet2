<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>
    <link rel="stylesheet" th:href="@{/css/reset.css}">
    <link rel="stylesheet" th:href="@{/css/calendar/calendar.css}">

    <!-- <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" /> -->


    <title>Document</title>


</head>
<body>

<div th:replace="~{include/header :: headerFragment}"></div>



    <div id="mobileCalendarButton" >
        <div>
            <button id="mobileOpenJobPosting">공채정보</button>
            <button id="mobileJobPosting">채용정보</button>
            <button id="mobileStartDate">시작일</button>
            <button id="mobileEndDate">종료일</button>
        </div>
    </div>

    <div id='external-events'>
    <!--     
        <p>
            <strong>Draggable Events</strong>
        </p>
        
        <div class='fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event'>
            <div class='fc-event-main'>My Event 1</div>
        </div>
        <div class='fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event'>
            <div class='fc-event-main'>My Event 2</div>
        </div>
        <div class='fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event'>
            <div class='fc-event-main'>My Event 3</div>
        </div>
        <div class='fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event'>
            <div class='fc-event-main'>My Event 4</div>
        </div>
        <div class='fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event'>
            <div class='fc-event-main'>My Event 5</div>
        </div>
        
        <p>
            <input type='checkbox' id='drop-remove' />
            <label for='drop-remove'>remove after drop</label>
        </p>
        </div>
        
        <div id='calendar-container'> 

        -->
    </div>  
   
    

    <div id='calendar'></div>



    <script th:src="@{/css/js/calendar.js}"></script>
    <script>

    document.addEventListener('DOMContentLoaded', function() {
    var Calendar = FullCalendar.Calendar;
    var Draggable = FullCalendar.Draggable;
    
    var containerEl = document.getElementById('external-events');
    var calendarEl = document.getElementById('calendar');
    var checkbox = document.getElementById('drop-remove');
    
    // initialize the external events
    // -----------------------------------------------------------------
    
    new Draggable(containerEl, {
        itemSelector: '.fc-event',
        eventData: function(eventEl) {
        return {
            title: eventEl.innerText
        };
        }
    });
    
    // initialize the calendar11
    // -----------------------------------------------------------------

        var customButtons = {
            startDay: {
                text: '시작일',
                className: 'startDay',
                click: function() {
                    alert('시작일만 표시됨!');
                }
            },
            endDay: {
                text: '종료일',
                className: 'endDay',
                click: function() {
                    alert('종료일만 표시됨!');
                }
            },
            openJobPosting: {
                text: '공채정보',
                className: 'openJobPosting',
                click: function() {
                    alert('공채정보만 표시됨!');
                }
            },
            jobPosting: {
                text: '채용정보',
                className: 'jobPosting',
                click: function() {
                    alert('채용정보만 표시됨!')
                }
            }
        };



    var calendar = new Calendar(calendarEl, {
        locale: 'ko',
        headerToolbar: {
            left: window.innerWidth < 767 ? '' : 'openJobPosting,jobPosting,startDay,endDay',
            center: window.innerWidth < 767 ? 'prev,title,next' : 'title',
            right: 'today'
        },
        initialView: 'dayGridMonth',
        customButtons: customButtons,
        dayCellContent : function(arg) {
            return arg.date.getDate();
        },ㄴ


        dateClick: function(info) {
        var date = info.date; //선택한 날짜를 date에 넣어서 날짜 구하는 거
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var day = date.getDate();

        //날짜 정돈시켜서 두자릿수로
        if(month < 10) month = '0' + month;
        if(day < 10) day = '0' + day;

        //한글로
        var clickDateIndicate = year + '년 ' + month + '월 ' + day + '일';

        //div 에 표시하기
        document.querySelector('.selectDate').textContent=clickDateIndicate;

        // 이전 선택된 셀에서 색 제거
        document.querySelectorAll('.fc-daygrid-day').forEach(function(cell) {
            cell.classList.remove('selectedDateColor');
        });

        // 클릭한 날짜 셀에 색 입히기
        var clickedCell = document.querySelector('[data-date="' + info.dateStr + '"]');
        if (clickedCell) {
            clickedCell.classList.add('selectedDateColor');
        }
        }

    });

    calendar.render();
    });


    /*
    * 현재는 window.innerWidth로 초기값만 잡고 있기 때문에 화면 크기 변경 시 버튼 업데이트 안 됨.
이걸 동적으로 바꾸고 싶다면 window.resize 이벤트에 calendar.setOption()이나 calendar.destroy() → new Calendar() 방식 써야 해.

하지만 지금은 그게 목적 아니니까 위 코드만 수정하면 PC에서 버튼 문제 해결돼!

필요하면 resize 처리도 같이 도와줄게
    *
    *
    * */


    </script>


<script th:src="@{/css/js/header.js}"></script>

<div class="selectDate"></div>

<div class="blankBox">

    <div class="calendarJobPost ">
        악덕기업
        <div>주5일 120시간 연봉 1200만원 프로그래머</div>
    </div>
    <div class="calendarJobPost">
        악덕기업
        <div>주5일 120시간 연봉 1200만원 프로그래머</div>
    </div>
    <div class="calendarJobPost">
        악덕기업
    <div>주5일 120시간 연봉 1200만원 프로그래머</div>
    </div>
    <div class="calendarJobPost">
        악덕기업
        <div>주5일 120시간 연봉 1200만원 프로그래머</div>
    </div>
    <div class="calendarJobPost">
        악덕기업
        <div>주5일 120시간 연봉 1200만원 프로그래머</div>
    </div>
    <div class="calendarJobPost">
        악덕기업
        <div>주5일 120시간 연봉 1200만원 프로그래머</div>
    </div>
    <div class="calendarJobPost">
        악덕기업
        <div>주5일 120시간 연봉 1200만원 프로그래머</div>
    </div>







</div>

<div th:replace="~{include/footer :: footerFragment}"></div>

</body>
</html>